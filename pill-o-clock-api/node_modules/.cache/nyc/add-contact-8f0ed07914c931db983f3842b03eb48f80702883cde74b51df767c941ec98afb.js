function cov_2bymzns3ai(){var path="/Users/Au/bootcamp/collab/skylab-bootcamp-202001/staff/aurora-perez/pill-o-clock/pill-o-clock-api/logic/add-contact.js";var hash="3519121336dcd0bd3b539709dc088ab0487a8a4d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/Au/bootcamp/collab/skylab-bootcamp-202001/staff/aurora-perez/pill-o-clock/pill-o-clock-api/logic/add-contact.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:50}},"1":{start:{line:2,column:29},end:{line:2,column:57}},"2":{start:{line:3,column:43},end:{line:3,column:73}},"3":{start:{line:5,column:0},end:{line:22,column:1}},"4":{start:{line:6,column:4},end:{line:6,column:37}},"5":{start:{line:7,column:4},end:{line:7,column:49}},"6":{start:{line:9,column:4},end:{line:21,column:24}},"7":{start:{line:11,column:12},end:{line:11,column:82}},"8":{start:{line:11,column:23},end:{line:11,column:82}},"9":{start:{line:13,column:12},end:{line:13,column:92}},"10":{start:{line:13,column:29},end:{line:13,column:92}},"11":{start:{line:15,column:12},end:{line:15,column:44}},"12":{start:{line:17,column:12},end:{line:17,column:44}},"13":{start:{line:19,column:12},end:{line:19,column:64}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:17},end:{line:5,column:18}},loc:{start:{line:5,column:42},end:{line:22,column:1}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:10,column:14},end:{line:10,column:15}},loc:{start:{line:10,column:38},end:{line:20,column:9}},line:10},"2":{name:"(anonymous_2)",decl:{start:{line:21,column:14},end:{line:21,column:15}},loc:{start:{line:21,column:20},end:{line:21,column:23}},line:21}},branchMap:{"0":{loc:{start:{line:11,column:12},end:{line:11,column:82}},type:"if",locations:[{start:{line:11,column:12},end:{line:11,column:82}},{start:{line:11,column:12},end:{line:11,column:82}}],line:11},"1":{loc:{start:{line:13,column:12},end:{line:13,column:92}},type:"if",locations:[{start:{line:13,column:12},end:{line:13,column:92}},{start:{line:13,column:12},end:{line:13,column:92}}],line:13}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3519121336dcd0bd3b539709dc088ab0487a8a4d"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_2bymzns3ai=function(){return actualCoverage;};return actualCoverage;}cov_2bymzns3ai();const{validate}=(cov_2bymzns3ai().s[0]++,require('pill-o-clock-utils'));const{models:{User}}=(cov_2bymzns3ai().s[1]++,require('pill-o-clock-data'));const{NotFoundError,NotAllowedError}=(cov_2bymzns3ai().s[2]++,require('pill-o-clock-errors'));cov_2bymzns3ai().s[3]++;module.exports=(idUser,idSecondUser)=>{cov_2bymzns3ai().f[0]++;cov_2bymzns3ai().s[4]++;validate.string(idUser,'idUser');cov_2bymzns3ai().s[5]++;validate.string(idSecondUser,'idSecondUser');cov_2bymzns3ai().s[6]++;return Promise.all([User.findById(idUser),User.findById(idSecondUser)]).then(([user,secondUser])=>{cov_2bymzns3ai().f[1]++;cov_2bymzns3ai().s[7]++;if(!user){cov_2bymzns3ai().b[0][0]++;cov_2bymzns3ai().s[8]++;throw new NotFoundError(`user with id ${idUser} not found`);}else{cov_2bymzns3ai().b[0][1]++;}cov_2bymzns3ai().s[9]++;if(!secondUser){cov_2bymzns3ai().b[1][0]++;cov_2bymzns3ai().s[10]++;throw new NotFoundError(`user with id ${secondUser} not found`);}else{cov_2bymzns3ai().b[1][1]++;}cov_2bymzns3ai().s[11]++;user.contacts.push(idSecondUser);cov_2bymzns3ai().s[12]++;secondUser.contacts.push(idUser);cov_2bymzns3ai().s[13]++;return Promise.all([user.save(),secondUser.save()]);}).then(()=>{cov_2bymzns3ai().f[2]++;});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZC1jb250YWN0LmpzIl0sIm5hbWVzIjpbInZhbGlkYXRlIiwicmVxdWlyZSIsIm1vZGVscyIsIlVzZXIiLCJOb3RGb3VuZEVycm9yIiwiTm90QWxsb3dlZEVycm9yIiwibW9kdWxlIiwiZXhwb3J0cyIsImlkVXNlciIsImlkU2Vjb25kVXNlciIsInN0cmluZyIsIlByb21pc2UiLCJhbGwiLCJmaW5kQnlJZCIsInRoZW4iLCJ1c2VyIiwic2Vjb25kVXNlciIsImNvbnRhY3RzIiwicHVzaCIsInNhdmUiXSwibWFwcGluZ3MiOiI4K0VBQUEsS0FBTSxDQUFFQSxRQUFGLDJCQUFlQyxPQUFPLENBQUMsb0JBQUQsQ0FBdEIsQ0FBTixDQUNBLEtBQU0sQ0FBRUMsTUFBTSxDQUFFLENBQUVDLElBQUYsQ0FBViwyQkFBdUJGLE9BQU8sQ0FBQyxtQkFBRCxDQUE5QixDQUFOLENBQ0EsS0FBTSxDQUFFRyxhQUFGLENBQWlCQyxlQUFqQiwyQkFBcUNKLE9BQU8sQ0FBQyxxQkFBRCxDQUE1QyxDQUFOLEMsd0JBRUFLLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUFDQyxNQUFELENBQVNDLFlBQVQsR0FBeUIsaURBQ3RDVCxRQUFRLENBQUNVLE1BQVQsQ0FBZ0JGLE1BQWhCLENBQXdCLFFBQXhCLEVBRHNDLHdCQUV0Q1IsUUFBUSxDQUFDVSxNQUFULENBQWdCRCxZQUFoQixDQUE4QixjQUE5QixFQUZzQyx3QkFJdEMsTUFBT0UsQ0FBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksQ0FBQ1QsSUFBSSxDQUFDVSxRQUFMLENBQWNMLE1BQWQsQ0FBRCxDQUF3QkwsSUFBSSxDQUFDVSxRQUFMLENBQWNKLFlBQWQsQ0FBeEIsQ0FBWixFQUNGSyxJQURFLENBQ0csQ0FBQyxDQUFDQyxJQUFELENBQU9DLFVBQVAsQ0FBRCxHQUF3QixpREFDMUIsR0FBSSxDQUFDRCxJQUFMLENBQVcseURBQU0sSUFBSVgsQ0FBQUEsYUFBSixDQUFtQixnQkFBZUksTUFBTyxZQUF6QyxDQUFOLENBQTJELENBQXRFLGlDQUQwQix3QkFHMUIsR0FBSSxDQUFDUSxVQUFMLENBQWlCLDBEQUFNLElBQUlaLENBQUFBLGFBQUosQ0FBbUIsZ0JBQWVZLFVBQVcsWUFBN0MsQ0FBTixDQUErRCxDQUFoRixpQ0FIMEIseUJBSzFCRCxJQUFJLENBQUNFLFFBQUwsQ0FBY0MsSUFBZCxDQUFtQlQsWUFBbkIsRUFMMEIseUJBTzFCTyxVQUFVLENBQUNDLFFBQVgsQ0FBb0JDLElBQXBCLENBQXlCVixNQUF6QixFQVAwQix5QkFTMUIsTUFBT0csQ0FBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksQ0FBQ0csSUFBSSxDQUFDSSxJQUFMLEVBQUQsQ0FBY0gsVUFBVSxDQUFDRyxJQUFYLEVBQWQsQ0FBWixDQUFQLENBQ0gsQ0FYRSxFQVlGTCxJQVpFLENBWUcsSUFBTSx5QkFBRyxDQVpaLENBQVAsQ0FhSCxDQWpCRCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgdmFsaWRhdGUgfSA9IHJlcXVpcmUoJ3BpbGwtby1jbG9jay11dGlscycpXG5jb25zdCB7IG1vZGVsczogeyBVc2VyIH0gfSA9IHJlcXVpcmUoJ3BpbGwtby1jbG9jay1kYXRhJylcbmNvbnN0IHsgTm90Rm91bmRFcnJvciwgTm90QWxsb3dlZEVycm9yIH0gPSByZXF1aXJlKCdwaWxsLW8tY2xvY2stZXJyb3JzJylcblxubW9kdWxlLmV4cG9ydHMgPSAoaWRVc2VyLCBpZFNlY29uZFVzZXIpPT4geyBcbiAgICB2YWxpZGF0ZS5zdHJpbmcoaWRVc2VyLCAnaWRVc2VyJylcbiAgICB2YWxpZGF0ZS5zdHJpbmcoaWRTZWNvbmRVc2VyLCAnaWRTZWNvbmRVc2VyJykgICAgXG5cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1VzZXIuZmluZEJ5SWQoaWRVc2VyKSwgVXNlci5maW5kQnlJZChpZFNlY29uZFVzZXIpXSlcbiAgICAgICAgLnRoZW4oKFt1c2VyLCBzZWNvbmRVc2VyXSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB0aHJvdyBuZXcgTm90Rm91bmRFcnJvcihgdXNlciB3aXRoIGlkICR7aWRVc2VyfSBub3QgZm91bmRgKVxuXG4gICAgICAgICAgICBpZiAoIXNlY29uZFVzZXIpIHRocm93IG5ldyBOb3RGb3VuZEVycm9yKGB1c2VyIHdpdGggaWQgJHtzZWNvbmRVc2VyfSBub3QgZm91bmRgKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB1c2VyLmNvbnRhY3RzLnB1c2goaWRTZWNvbmRVc2VyKVxuXG4gICAgICAgICAgICBzZWNvbmRVc2VyLmNvbnRhY3RzLnB1c2goaWRVc2VyKVxuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3VzZXIuc2F2ZSgpLCBzZWNvbmRVc2VyLnNhdmUoKV0pXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKCgpID0+IHsgfSlcbn0iXX0=
function cov_2bymzns3ai(){var path="/Users/Au/bootcamp/collab/skylab-bootcamp-202001/staff/aurora-perez/pill-o-clock/pill-o-clock-api/logic/add-contact.js";var hash="f75b1f52c25ed9340530dfbda5e5e1fd4e671f7d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/Au/bootcamp/collab/skylab-bootcamp-202001/staff/aurora-perez/pill-o-clock/pill-o-clock-api/logic/add-contact.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:50}},"1":{start:{line:2,column:29},end:{line:2,column:57}},"2":{start:{line:3,column:43},end:{line:3,column:73}},"3":{start:{line:18,column:0},end:{line:35,column:1}},"4":{start:{line:19,column:4},end:{line:19,column:37}},"5":{start:{line:20,column:4},end:{line:20,column:49}},"6":{start:{line:22,column:4},end:{line:34,column:24}},"7":{start:{line:24,column:12},end:{line:24,column:82}},"8":{start:{line:24,column:23},end:{line:24,column:82}},"9":{start:{line:26,column:12},end:{line:26,column:92}},"10":{start:{line:26,column:29},end:{line:26,column:92}},"11":{start:{line:28,column:12},end:{line:28,column:44}},"12":{start:{line:30,column:12},end:{line:30,column:44}},"13":{start:{line:32,column:12},end:{line:32,column:64}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:18,column:17},end:{line:18,column:18}},loc:{start:{line:18,column:42},end:{line:35,column:1}},line:18},"1":{name:"(anonymous_1)",decl:{start:{line:23,column:14},end:{line:23,column:15}},loc:{start:{line:23,column:38},end:{line:33,column:9}},line:23},"2":{name:"(anonymous_2)",decl:{start:{line:34,column:14},end:{line:34,column:15}},loc:{start:{line:34,column:20},end:{line:34,column:23}},line:34}},branchMap:{"0":{loc:{start:{line:24,column:12},end:{line:24,column:82}},type:"if",locations:[{start:{line:24,column:12},end:{line:24,column:82}},{start:{line:24,column:12},end:{line:24,column:82}}],line:24},"1":{loc:{start:{line:26,column:12},end:{line:26,column:92}},type:"if",locations:[{start:{line:26,column:12},end:{line:26,column:92}},{start:{line:26,column:12},end:{line:26,column:92}}],line:26}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f75b1f52c25ed9340530dfbda5e5e1fd4e671f7d"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_2bymzns3ai=function(){return actualCoverage;};return actualCoverage;}cov_2bymzns3ai();const{validate}=(cov_2bymzns3ai().s[0]++,require('pill-o-clock-utils'));const{models:{User}}=(cov_2bymzns3ai().s[1]++,require('pill-o-clock-data'));const{NotFoundError,NotAllowedError}=(cov_2bymzns3ai().s[2]++,require('pill-o-clock-errors'));/**
 * Add a new contact to the array of user contacts
 * 
 * @param {string} idUser user's unique id
 * 
 * @param {string} idSecondUser the id of the user to add
 *
 * @returns {Promise<undefined>} an empty Promise on a successful addition
 * 
 * @throws {NotFoundError} if the user does not exist
 */cov_2bymzns3ai().s[3]++;module.exports=(idUser,idSecondUser)=>{cov_2bymzns3ai().f[0]++;cov_2bymzns3ai().s[4]++;validate.string(idUser,'idUser');cov_2bymzns3ai().s[5]++;validate.string(idSecondUser,'idSecondUser');cov_2bymzns3ai().s[6]++;return Promise.all([User.findById(idUser),User.findById(idSecondUser)]).then(([user,secondUser])=>{cov_2bymzns3ai().f[1]++;cov_2bymzns3ai().s[7]++;if(!user){cov_2bymzns3ai().b[0][0]++;cov_2bymzns3ai().s[8]++;throw new NotFoundError(`user with id ${idUser} not found`);}else{cov_2bymzns3ai().b[0][1]++;}cov_2bymzns3ai().s[9]++;if(!secondUser){cov_2bymzns3ai().b[1][0]++;cov_2bymzns3ai().s[10]++;throw new NotFoundError(`user with id ${secondUser} not found`);}else{cov_2bymzns3ai().b[1][1]++;}cov_2bymzns3ai().s[11]++;user.contacts.push(idSecondUser);cov_2bymzns3ai().s[12]++;secondUser.contacts.push(idUser);cov_2bymzns3ai().s[13]++;return Promise.all([user.save(),secondUser.save()]);}).then(()=>{cov_2bymzns3ai().f[2]++;});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZC1jb250YWN0LmpzIl0sIm5hbWVzIjpbInZhbGlkYXRlIiwicmVxdWlyZSIsIm1vZGVscyIsIlVzZXIiLCJOb3RGb3VuZEVycm9yIiwiTm90QWxsb3dlZEVycm9yIiwibW9kdWxlIiwiZXhwb3J0cyIsImlkVXNlciIsImlkU2Vjb25kVXNlciIsInN0cmluZyIsIlByb21pc2UiLCJhbGwiLCJmaW5kQnlJZCIsInRoZW4iLCJ1c2VyIiwic2Vjb25kVXNlciIsImNvbnRhY3RzIiwicHVzaCIsInNhdmUiXSwibWFwcGluZ3MiOiJ3L0VBQUEsS0FBTSxDQUFFQSxRQUFGLDJCQUFlQyxPQUFPLENBQUMsb0JBQUQsQ0FBdEIsQ0FBTixDQUNBLEtBQU0sQ0FBRUMsTUFBTSxDQUFFLENBQUVDLElBQUYsQ0FBViwyQkFBdUJGLE9BQU8sQ0FBQyxtQkFBRCxDQUE5QixDQUFOLENBQ0EsS0FBTSxDQUFFRyxhQUFGLENBQWlCQyxlQUFqQiwyQkFBcUNKLE9BQU8sQ0FBQyxxQkFBRCxDQUE1QyxDQUFOLENBRUE7Ozs7Ozs7Ozs7MkJBYUFLLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixDQUFDQyxNQUFELENBQVNDLFlBQVQsR0FBeUIsaURBQ3RDVCxRQUFRLENBQUNVLE1BQVQsQ0FBZ0JGLE1BQWhCLENBQXdCLFFBQXhCLEVBRHNDLHdCQUV0Q1IsUUFBUSxDQUFDVSxNQUFULENBQWdCRCxZQUFoQixDQUE4QixjQUE5QixFQUZzQyx3QkFJdEMsTUFBT0UsQ0FBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksQ0FBQ1QsSUFBSSxDQUFDVSxRQUFMLENBQWNMLE1BQWQsQ0FBRCxDQUF3QkwsSUFBSSxDQUFDVSxRQUFMLENBQWNKLFlBQWQsQ0FBeEIsQ0FBWixFQUNGSyxJQURFLENBQ0csQ0FBQyxDQUFDQyxJQUFELENBQU9DLFVBQVAsQ0FBRCxHQUF3QixpREFDMUIsR0FBSSxDQUFDRCxJQUFMLENBQVcseURBQU0sSUFBSVgsQ0FBQUEsYUFBSixDQUFtQixnQkFBZUksTUFBTyxZQUF6QyxDQUFOLENBQTJELENBQXRFLGlDQUQwQix3QkFHMUIsR0FBSSxDQUFDUSxVQUFMLENBQWlCLDBEQUFNLElBQUlaLENBQUFBLGFBQUosQ0FBbUIsZ0JBQWVZLFVBQVcsWUFBN0MsQ0FBTixDQUErRCxDQUFoRixpQ0FIMEIseUJBSzFCRCxJQUFJLENBQUNFLFFBQUwsQ0FBY0MsSUFBZCxDQUFtQlQsWUFBbkIsRUFMMEIseUJBTzFCTyxVQUFVLENBQUNDLFFBQVgsQ0FBb0JDLElBQXBCLENBQXlCVixNQUF6QixFQVAwQix5QkFTMUIsTUFBT0csQ0FBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksQ0FBQ0csSUFBSSxDQUFDSSxJQUFMLEVBQUQsQ0FBY0gsVUFBVSxDQUFDRyxJQUFYLEVBQWQsQ0FBWixDQUFQLENBQ0gsQ0FYRSxFQVlGTCxJQVpFLENBWUcsSUFBTSx5QkFBRyxDQVpaLENBQVAsQ0FhSCxDQWpCRCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgdmFsaWRhdGUgfSA9IHJlcXVpcmUoJ3BpbGwtby1jbG9jay11dGlscycpXG5jb25zdCB7IG1vZGVsczogeyBVc2VyIH0gfSA9IHJlcXVpcmUoJ3BpbGwtby1jbG9jay1kYXRhJylcbmNvbnN0IHsgTm90Rm91bmRFcnJvciwgTm90QWxsb3dlZEVycm9yIH0gPSByZXF1aXJlKCdwaWxsLW8tY2xvY2stZXJyb3JzJylcblxuLyoqXG4gKiBBZGQgYSBuZXcgY29udGFjdCB0byB0aGUgYXJyYXkgb2YgdXNlciBjb250YWN0c1xuICogXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRVc2VyIHVzZXIncyB1bmlxdWUgaWRcbiAqIFxuICogQHBhcmFtIHtzdHJpbmd9IGlkU2Vjb25kVXNlciB0aGUgaWQgb2YgdGhlIHVzZXIgdG8gYWRkXG4gKlxuICogQHJldHVybnMge1Byb21pc2U8dW5kZWZpbmVkPn0gYW4gZW1wdHkgUHJvbWlzZSBvbiBhIHN1Y2Nlc3NmdWwgYWRkaXRpb25cbiAqIFxuICogQHRocm93cyB7Tm90Rm91bmRFcnJvcn0gaWYgdGhlIHVzZXIgZG9lcyBub3QgZXhpc3RcbiAqL1xuXG5cbm1vZHVsZS5leHBvcnRzID0gKGlkVXNlciwgaWRTZWNvbmRVc2VyKT0+IHsgXG4gICAgdmFsaWRhdGUuc3RyaW5nKGlkVXNlciwgJ2lkVXNlcicpXG4gICAgdmFsaWRhdGUuc3RyaW5nKGlkU2Vjb25kVXNlciwgJ2lkU2Vjb25kVXNlcicpICAgIFxuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFtVc2VyLmZpbmRCeUlkKGlkVXNlciksIFVzZXIuZmluZEJ5SWQoaWRTZWNvbmRVc2VyKV0pXG4gICAgICAgIC50aGVuKChbdXNlciwgc2Vjb25kVXNlcl0pID0+IHtcbiAgICAgICAgICAgIGlmICghdXNlcikgdGhyb3cgbmV3IE5vdEZvdW5kRXJyb3IoYHVzZXIgd2l0aCBpZCAke2lkVXNlcn0gbm90IGZvdW5kYClcblxuICAgICAgICAgICAgaWYgKCFzZWNvbmRVc2VyKSB0aHJvdyBuZXcgTm90Rm91bmRFcnJvcihgdXNlciB3aXRoIGlkICR7c2Vjb25kVXNlcn0gbm90IGZvdW5kYClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdXNlci5jb250YWN0cy5wdXNoKGlkU2Vjb25kVXNlcilcblxuICAgICAgICAgICAgc2Vjb25kVXNlci5jb250YWN0cy5wdXNoKGlkVXNlcilcblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFt1c2VyLnNhdmUoKSwgc2Vjb25kVXNlci5zYXZlKCldKVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoKSA9PiB7IH0pXG59Il19
function cov_1dud8fn2sd(){var path="/Users/Au/bootcamp/collab/skylab-bootcamp-202001/staff/aurora-perez/pill-o-clock/pill-o-clock-api/logic/retrieve-user.js";var hash="69043deae35ff54606837332be0a90e52ab6ad8f";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/Au/bootcamp/collab/skylab-bootcamp-202001/staff/aurora-perez/pill-o-clock/pill-o-clock-api/logic/retrieve-user.js",statementMap:{"0":{start:{line:1,column:21},end:{line:1,column:50}},"1":{start:{line:2,column:29},end:{line:2,column:57}},"2":{start:{line:3,column:43},end:{line:3,column:73}},"3":{start:{line:16,column:0},end:{line:32,column:1}},"4":{start:{line:17,column:4},end:{line:17,column:29}},"5":{start:{line:19,column:4},end:{line:31,column:137}},"6":{start:{line:21,column:12},end:{line:21,column:83}},"7":{start:{line:21,column:23},end:{line:21,column:83}},"8":{start:{line:23,column:12},end:{line:23,column:30}},"9":{start:{line:25,column:12},end:{line:25,column:27}},"10":{start:{line:27,column:12},end:{line:27,column:37}},"11":{start:{line:29,column:12},end:{line:29,column:30}},"12":{start:{line:31,column:78},end:{line:31,column:135}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:16,column:17},end:{line:16,column:18}},loc:{start:{line:16,column:23},end:{line:32,column:1}},line:16},"1":{name:"(anonymous_1)",decl:{start:{line:20,column:14},end:{line:20,column:15}},loc:{start:{line:20,column:22},end:{line:30,column:9}},line:20},"2":{name:"(anonymous_2)",decl:{start:{line:31,column:14},end:{line:31,column:15}},loc:{start:{line:31,column:78},end:{line:31,column:135}},line:31}},branchMap:{"0":{loc:{start:{line:21,column:12},end:{line:21,column:83}},type:"if",locations:[{start:{line:21,column:12},end:{line:21,column:83}},{start:{line:21,column:12},end:{line:21,column:83}}],line:21}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"69043deae35ff54606837332be0a90e52ab6ad8f"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1dud8fn2sd=function(){return actualCoverage;};return actualCoverage;}cov_1dud8fn2sd();const{validate}=(cov_1dud8fn2sd().s[0]++,require('pill-o-clock-utils'));const{models:{User}}=(cov_1dud8fn2sd().s[1]++,require('pill-o-clock-data'));const{NotAllowedError,NotFoundError}=(cov_1dud8fn2sd().s[2]++,require('pill-o-clock-errors'));/**
 * Finds and receives data from a desired user
 * 
 * @param {string} id user's unique id
 * 
 * @returns {Promise<string>} user's name, surname, gender, age, phone, profile, email and id from storage
 * 
 * @throws {NotFoundError} if the user does not exist
 */cov_1dud8fn2sd().s[3]++;module.exports=id=>{cov_1dud8fn2sd().f[0]++;cov_1dud8fn2sd().s[4]++;validate.string(id,'id');cov_1dud8fn2sd().s[5]++;return User.findById(id).then(user=>{cov_1dud8fn2sd().f[1]++;cov_1dud8fn2sd().s[6]++;if(!user){cov_1dud8fn2sd().b[0][0]++;cov_1dud8fn2sd().s[7]++;throw new NotFoundError(`user with id ${id} does not exist`);}else{cov_1dud8fn2sd().b[0][1]++;}cov_1dud8fn2sd().s[8]++;user.id=user._id;cov_1dud8fn2sd().s[9]++;delete user._id;cov_1dud8fn2sd().s[10]++;user.retrieved=new Date();cov_1dud8fn2sd().s[11]++;return user.save();}).then(({name,surname,gender,age,phone,profile,email,id})=>{cov_1dud8fn2sd().f[2]++;cov_1dud8fn2sd().s[12]++;return{name,surname,gender,age,phone,profile,email,id};});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJldHJpZXZlLXVzZXIuanMiXSwibmFtZXMiOlsidmFsaWRhdGUiLCJyZXF1aXJlIiwibW9kZWxzIiwiVXNlciIsIk5vdEFsbG93ZWRFcnJvciIsIk5vdEZvdW5kRXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIiwiaWQiLCJzdHJpbmciLCJmaW5kQnlJZCIsInRoZW4iLCJ1c2VyIiwiX2lkIiwicmV0cmlldmVkIiwiRGF0ZSIsInNhdmUiLCJuYW1lIiwic3VybmFtZSIsImdlbmRlciIsImFnZSIsInBob25lIiwicHJvZmlsZSIsImVtYWlsIl0sIm1hcHBpbmdzIjoia3ZFQUFBLEtBQU0sQ0FBRUEsUUFBRiwyQkFBZUMsT0FBTyxDQUFDLG9CQUFELENBQXRCLENBQU4sQ0FDQSxLQUFNLENBQUVDLE1BQU0sQ0FBRSxDQUFFQyxJQUFGLENBQVYsMkJBQXVCRixPQUFPLENBQUMsbUJBQUQsQ0FBOUIsQ0FBTixDQUNBLEtBQU0sQ0FBRUcsZUFBRixDQUFtQkMsYUFBbkIsMkJBQXFDSixPQUFPLENBQUMscUJBQUQsQ0FBNUMsQ0FBTixDQUVBOzs7Ozs7OzsyQkFXQUssTUFBTSxDQUFDQyxPQUFQLENBQWlCQyxFQUFFLEVBQUksaURBQ25CUixRQUFRLENBQUNTLE1BQVQsQ0FBZ0JELEVBQWhCLENBQW9CLElBQXBCLEVBRG1CLHdCQUduQixNQUFPTCxDQUFBQSxJQUFJLENBQUNPLFFBQUwsQ0FBY0YsRUFBZCxFQUNGRyxJQURFLENBQ0dDLElBQUksRUFBSSxpREFDVixHQUFJLENBQUNBLElBQUwsQ0FBVyx5REFBTSxJQUFJUCxDQUFBQSxhQUFKLENBQW1CLGdCQUFlRyxFQUFHLGlCQUFyQyxDQUFOLENBQTRELENBQXZFLGlDQURVLHdCQUdWSSxJQUFJLENBQUNKLEVBQUwsQ0FBVUksSUFBSSxDQUFDQyxHQUFmLENBSFUsd0JBS1YsTUFBT0QsQ0FBQUEsSUFBSSxDQUFDQyxHQUFaLENBTFUseUJBT1ZELElBQUksQ0FBQ0UsU0FBTCxDQUFpQixHQUFJQyxDQUFBQSxJQUFKLEVBQWpCLENBUFUseUJBU1YsTUFBT0gsQ0FBQUEsSUFBSSxDQUFDSSxJQUFMLEVBQVAsQ0FDSCxDQVhFLEVBWUZMLElBWkUsQ0FZRyxDQUFDLENBQUVNLElBQUYsQ0FBUUMsT0FBUixDQUFpQkMsTUFBakIsQ0FBeUJDLEdBQXpCLENBQThCQyxLQUE5QixDQUFxQ0MsT0FBckMsQ0FBOENDLEtBQTlDLENBQXFEZixFQUFyRCxDQUFELEdBQWdFLHlEQUFFUyxJQUFGLENBQVFDLE9BQVIsQ0FBaUJDLE1BQWpCLENBQXlCQyxHQUF6QixDQUE4QkMsS0FBOUIsQ0FBcUNDLE9BQXJDLENBQThDQyxLQUE5QyxDQUFxRGYsRUFBckQsRUFBeUQsQ0FaNUgsQ0FBUCxDQWFILENBaEJEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyB2YWxpZGF0ZSB9ID0gcmVxdWlyZSgncGlsbC1vLWNsb2NrLXV0aWxzJylcbmNvbnN0IHsgbW9kZWxzOiB7IFVzZXIgfSB9ID0gcmVxdWlyZSgncGlsbC1vLWNsb2NrLWRhdGEnKVxuY29uc3QgeyBOb3RBbGxvd2VkRXJyb3IsIE5vdEZvdW5kRXJyb3IgfSA9IHJlcXVpcmUoJ3BpbGwtby1jbG9jay1lcnJvcnMnKVxuXG4vKipcbiAqIEZpbmRzIGFuZCByZWNlaXZlcyBkYXRhIGZyb20gYSBkZXNpcmVkIHVzZXJcbiAqIFxuICogQHBhcmFtIHtzdHJpbmd9IGlkIHVzZXIncyB1bmlxdWUgaWRcbiAqIFxuICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gdXNlcidzIG5hbWUsIHN1cm5hbWUsIGdlbmRlciwgYWdlLCBwaG9uZSwgcHJvZmlsZSwgZW1haWwgYW5kIGlkIGZyb20gc3RvcmFnZVxuICogXG4gKiBAdGhyb3dzIHtOb3RGb3VuZEVycm9yfSBpZiB0aGUgdXNlciBkb2VzIG5vdCBleGlzdFxuICovXG5cblxubW9kdWxlLmV4cG9ydHMgPSBpZCA9PiB7XG4gICAgdmFsaWRhdGUuc3RyaW5nKGlkLCAnaWQnKVxuXG4gICAgcmV0dXJuIFVzZXIuZmluZEJ5SWQoaWQpXG4gICAgICAgIC50aGVuKHVzZXIgPT4ge1xuICAgICAgICAgICAgaWYgKCF1c2VyKSB0aHJvdyBuZXcgTm90Rm91bmRFcnJvcihgdXNlciB3aXRoIGlkICR7aWR9IGRvZXMgbm90IGV4aXN0YClcblxuICAgICAgICAgICAgdXNlci5pZCA9IHVzZXIuX2lkXG5cbiAgICAgICAgICAgIGRlbGV0ZSB1c2VyLl9pZFxuXG4gICAgICAgICAgICB1c2VyLnJldHJpZXZlZCA9IG5ldyBEYXRlXG5cbiAgICAgICAgICAgIHJldHVybiB1c2VyLnNhdmUoKVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoeyBuYW1lLCBzdXJuYW1lLCBnZW5kZXIsIGFnZSwgcGhvbmUsIHByb2ZpbGUsIGVtYWlsLCBpZCB9KSA9PiAoeyBuYW1lLCBzdXJuYW1lLCBnZW5kZXIsIGFnZSwgcGhvbmUsIHByb2ZpbGUsIGVtYWlsLCBpZCB9KSlcbn0iXX0=